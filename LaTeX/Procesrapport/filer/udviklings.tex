\chapter{Udviklingsforløb}

\section{Litteratursøgning}
 Der er praktiseret en omhyggelig, systematisk tilgang til litteratursøgningen, så resultatet af projektarbejdet bliver repræsentativt og uden bias. Søgeresultaterne danner grobund for den empiri, som projektarbejdet bygger videre på, og det er derfor vigtigt, at det er solidt nok til at bære analyser og konklusioner. Der er med andre ord, søgt, analyseret og vurderet ny viden som er relevant inden for projektets fagområde og rammer. For at overskueliggøre litteratursøgningen, er denne inddelt i en søgeproces bestående af tre faser: søgestrategi, litteraturindsamling og litteraturudvælgelse. 
 
	\subsection{Søgestrategi}
	Søgestrategien, beskrevet i søgeprotokollen bilag E, er udarbejdet med tanke på, at fremsøge det mest relevante information, ud fra gigantiske datamængder. Endvidere er søgestrategien udarbejdet med henblik på at gøre søgningen reproducerbar for at sikre troværdighed.  
	Søgestrategien, der kombinerer ord i artiklernes titel og resumé med udvalgte emneord, boolske operatorer samt sononymer, er anvendt til at finde og screene artikler vedrørende den specifikke problemstilling. Der er søgt i databaserne; PubMed, Web of Science, Cochrane, og der er anvendt citation tracking samt Google Scholar og derudover håndsøgninger i fagbøger.  
	
	\subsection{Litteraturindsamling}
	I screeningen beskrevet ovenfor, blev artikler udvalgt, hvis ordene i artiklens titel og resumé matchede de udvalgte emneord. Derefter blev de udvalgte artikler selvstændigt bedømt af JH og JR, og artikeludvælgelsen blev foretaget sammenholdt med følgende inklusionskriterier:
	
		\begin{enumerate}
			\item engelsk el. nordisk sprog 
			\item valgte emneord med dertilhørende problemstillinger synes besvaret
			\item kildekritisk opfyldelse
			\item studietyper
		\end{enumerate} 
		
	Alle artikler, som opfyldte ovenstående inklusionskriterier gik videre til litteraturudvælgelse. 	
		
	\subsection{Litteraturudvælgelse}	
	Artiklerne blev gennemgået med et kritisk øje, og relevant information blev efterfølgende ekstraheret selvstændigt af JH og JR. Det lykkedes ikke, at fremsøge litteratur vedr. kvinders følelse af og holdninger til at anvende et lignende system som BVM. Det blev derfor besluttet at der måtte - hvis tidsrammen tillod - udarbejdes en usabilityundersøgelse på en gruppe på minimum 15 personer i hht. retningslinjer fra \textit{Association of the Advancement of Medical Instrumentation} og \textit{American National Standards Institute} (AAMI/ANSI HE75:2009). \\

\section{Testproces}
Projektet er et udviklingsprojekt, hvor der systematisk testes frem til en produktløsning. Projektet er derfor præget af et omfattende testforløb, hvor der med en systematisk tilgang er lagt vægt på reproducerbarhed samt sporbarhed. Dette afsnit beskriver, hvorledes testprocessen er udarbejdet. 

\subsection{Beskrivelse af testforløbet}
\label{subsec:testfor}
Det indledende testforløb blev udarbejdet med inspiration fra “Projekteringshåndbogen”, skrevet af Søren Lyngsø-Petersen, som beskriver test af produktionsudstyr til Health Care branchen. Lyngsø-Petersen beskriver, hvorledes et testforløb overordnet kan inddeles i fem faser;  

	\begin{enumerate}
		\item Indledende funktionstest
		\item Pre-Factory Acceptance Test (Pre-FAT)
		\item Factory Acceptance Test (FAT)
		\item Site Acceptance Test (SAT)
		\item Kvalificeringstest
	\end{enumerate}

Indledende funktionstest er et almindeligt anvendt fagterm indenfor ingeniørvidenskab, og omfatter enhedstest. Pre-FAT omfatter integrationstest. FAT udføres for at kontrollere, at systemet og dets komponenter samt software fungerer korrekt, og at systemets ydeevne samt specifikationer er i overensstemmelse med de aftalte krav i kravsspecifikation. SAT finder sted, dér hvor produktet skal anvendes efter en eventuel endelig installation og konfiguration. Testen gentager FAT'en eller en acceptabel delmængde heraf, for at kontrollere, at der ingen skade er sket under transport og efter en eventuel installation. Kvalificeringstesten er en systemvalidering til kunden.   
Det blev overvejet at følge disse faser, da det var et ønske at arbejde med et testforløb fra Health Care industrien. Et muligt testforløb blev skitseret, hvilket fremgår af figur \ref{fig:testskitse}. Efter en grundig gennemgang med mange spændende refleksioner over, hvorledes projektets testforløb kunne tilpasses det beskrevne testforløb fra “Projekteringshåndbogen”, blev det konkluderet, at bogens testforløb er for rettet mod produktionen af det medicinske udstyr i forhold til projektet, og derfor var uhensigtsmæssigt at følge. I stedet for at tilpasse testforløbet til en metode blev det besluttet at tilpasse enkelte metoder og anvende disse i den videre udarbejdelse af projektets testforløb. Således blev testforløb-modellen tilpasset projektets testforløb, som endte ud med at være et testforløb inddelt i følgende fem faser:  

\begin{figure}[htb]
\centering	
\includegraphics[width=5in]{testskitse.jpg}
\caption{En skitsering af testforløbet på baggrund af Lyngsø-Petersens fem faser}
\label{fig:testskitse}
\end{figure}

	\begin{enumerate}
		\item Enhedstest
		\item Integrationstest
		\item Accepttest
		\item Lab PoC
		\item Kvalificeringstest 
	\end{enumerate}

I første fase, enhedstest, testes de indgående komponenter, for at sikre disses funktion. I anden fase, integrationstest, er hovedformålet at foretage verificeringer af de forskellige funktionaliteter og processer i elementer, som anvendes i det videre testforløb. I tredje fase, accepttest, eftervises alle specificerede krav fra kravspecifikationen. I fjerde fase, Lab PoC, testes diverse forhold og hypoteser, og der udvikles mod en ny og bedre version af produktet. I femte fase, kvalificeringstest, foretages en systemvalidering til/med kunden. Testforløbet afspejler “God testpraksis”, som er et begreb anvendt inden for Health Care Industrien \citep{RefWorks:2}. “God testpraksis” beskriver en testprocedure, hvor man udfører og dokumenterer sine tests på en måde, som gør dem valide, hvilket afspejles i den måde, hvorpå dokumentationen af de foretagede tests i projektet er opbygget. Projektets testudførelse består derfor af følgende tre forhold;

	\begin{enumerate}
	\item beskrivelse af, hvordan testen skal udføres (testprocedure) 
	\item selve udførelsen af testen 
	\item dokumentation af testresultatet
	\end{enumerate} 

Testproceduren beskriver den praktiske udførelse af testen, således den er reproducerbar og alle vil have mulighed for at udføre testen, uden at have nogen specifik baggrundsviden. Dokumentationen af hver enkelte test starter med en testhypotese for at afklare, hvad det forventede resultat er. Derefter specificeres det anvendte udstyr og komponenter, og testopstillingen samt testopsætningen beskrives meget udførligt for at sikre en korrekt udførelse af testen. Selve udførslen af testen beskrives med en høj detaljegrad og kan muligvis forekomme nedladende, men da resultatet kan afhænge af, hvordan testen udføres er dette et nødvendigt forhold. Slutvis fremvises testresultaterne, og disse diskuteres efterfølgende for at sikre en refleksion over de opnåede resultater. Testen afrundes med en konklusion af resultatet i sammenhold med testhypotesen, og der planlægges en aktion for næste skridt. 

Testforløbet er en agil proces, som omfatter design, udvikling, test og opdagelser/ erfaringer. Fra den indledende planlægning, som foregår i konceptudviklingen samt high-level produktspecifikationen, kommer man ind i en designfase, hvorfra der udvikles, testes, opdages/ erfares samt designes på ny. Når man tilsidst opnår en test som opfylder et defineret kriterie, har man dermed sit minimum viable product (MVP). Projektgruppen har forsøgt at illustrere den agile testproces i figur \ref{fig:agiletesting}. 

		\begin{figure}[htb]
			\centering
				\includegraphics[width=4in]{AgileTesting}
				\caption{Testforløbet er en agil testproces, som omfatter design, udvikling, test og opdagelser/ erfaringer}
				\label{fig:agiletesting}
			\end{figure}
 

\subsection{Beskrivelse af roadblocks}
\label{subsec:roadblocks}
Der er under testforløbet stødt på flere hardwaremæssige udfordringer; herefter omtalt som \textit{roadblocks}. Det afsnit beskriver disse udfordringer, og dokumenterer samtidig, at projektgruppen ikke har siddet fast, men har benyttet tiden fordelagtigt. Eksempelvis er der ved opstået roadblock i LabVIEW, afsat en tidsbegrænsning, hvorpå man vil forsøge at udrede problemet og hvorefter der søges hjælp ved vejleder eller fagperson. Samtidig er arbejdet prioritetet således, at der oftest har ligget en plan B ved siden af, så der har været en anden mulighed liggende klar. Endvidere er der som nævnt benyttet fagpersoner og somme tider er andre opgaver påbegyndt, hvis der er opstået ventetid.  
Som nævnt tidligere er der eksempelvis afbrudt et sprint da dette samt Stage-Gate modellen viste sig at være uhensigtsmæssig at benytte på tidspunktet. Med en pragmatisk tilgang blev der straks arbejdet på en ny løsning.   

I figur \ref{fig:flowdiagramelyd} og \ref{fig:flowdiagrameop} vises, hvorledes enhedstestene af hhv. lydgivende og lydopfangende enheder er forløbet. Årsagerne til de mange enhedstest beskrives nærmere i følgende afsnit.  

\begin{figure}[htb]
			\centering
				\includegraphics[width=3in]{flowdiagramelyd}
				\caption{Flowdiagram over enhedstest af lydgivende enheder}	
				\label{fig:flowdiagramelyd}
			\end{figure}

\begin{figure}[htb]
			\centering
				\includegraphics[width=3in]{flowdiagrameop}
				\caption{Flowdiagram over enhedstest af lydopfangende enheder}	
				\label{fig:flowdiagrameop}
			\end{figure}

\subsubsection{Mikrofonproblemet}
Under udførslen af integrationstest I05, blev det observeret, at resultatet i VI'et \texttt{optagefrekvenssignal02.vi} blev opfanget af PC'ens indbyggede mikrofon og ikke minijack PC mikrofonen (M1). Der opstod en mistanke om problemet da der med en kritisk tilgang blev reflekteret over de \textit{for pæne} resultater - altså var resultaterne ens uanset M1's placering indeni samt uden for resonatoren. Der blev derefter testet ved at udtage M1 fra PC'en, hvorefter resultaterne stadig var ens. Dette medvirkede til en ny enhedstest, E04-M1, hvor M1 blev placeret i et andet rum med en lukket branddør imellem. Da der ikke blev opfanget et signal i LabVIEW fra M1 blev det konstateret, at M1 ikke var aktiv. Årsagen til problemstillingen skyldes, at M1 har et 3-pols stik, og derfor mangler en pol til lyd input. PC'en indlæser derfor M1 som en højtaler, og forsøger dermed at udsende lyd gennem mikrofonen. 
Løsningen på denne problemstilling er at anvende en mikrofon med 4-pols stik, en adapter eller en mikrofon med USB-stik.
Det blev forsøgt at optage lyd med et headset med indbygget mikrofon, som har et 4-pols minijack stik. Headsettet blev indlæst på PC´en, som et headset, og derfor var det ikke muligt at vælge headsetmikrofonen som lydkilde under PC'ens konfigurationsindstillinger. Det var heller ikke muligt at få forbindelse til mikrofonen gennem LabView. Konklusionen på denne problemstilling er, at der må sidde et 3-pols minijack hun stik i PC´en. Der er foretaget en internetsøgning på indholdet af stik i en Macbook Pro 2009 model for at understøtte denne konklusion. Det lykkedes ikke at finde specifikationer som klart udspecificerer hvilket hun minijackstik, der er indbygget i omhandlende PC. Det vælges at gå videre til test med et USB-webkamera med indbygget mikrofon (M2) da dette kan være en hurtig løsning af problemstillingen. M2 blev koblet til computeren og under konfigurationsindstillingerne på PC'en var det nu muligt at vælge M2 som lydopfanger. Samtidig blev andre lydkilder i PC'en fravalgt, og der blev nu forsøgt at optage en lyd i LabVIEW i enhedstest E05-M2. Det blev konkluderet, at det er muligt at anvende en mikrofon med USB stik til indlæsning af lydsignaler i LabView. Med denne nye viden til rådighed, blev det undersøgt om det er muligt at anvende en adapter, så M1 kunne tilsluttes. Det lykkedes at finde en adapter med den ønskede funktion, dog med nogle dages leveringstid. Leveringstiden blev opvejet mod at tilslutte en electret breakout board microphone (M3) til en Arduino Mega 2560 og opsætte et program i LabVIEW til dette. Det blev vurderet, at arbejdsomfanget af M3 var minimalt og opvejede ventetiden.
Grundet denne nye viden, udføres enhedstest samt samtlige integrationstest igen således resultaterne anses for at være valide. 

\subsubsection{Fra Arduino til DAQ}

I forbindelse med det indledende design af testopstillingen, blev Arduino Mega 2560 valgt frem for DAQ'en grundet økonomiske omstændigheder. Dog blev det hurtigt konstateret, at Arduinoen forårsagede uhensigtsmæssige udfordringer i forbindelse med frekvenssignalet, idet det kun er muligt at generere et firkantsignal igennem LINX MakerHub i LabVIEW. Det ønskede resultat var grundtonens frekvens, men i stedet blev firkantssignalets harmoniske overtoner opfanget som maksimum frekvens i FFT-funktionen i LabVIEW (integrationstest I04). Efter samtale med lektor Tore Arne Skogberg (TAS), blev det påpeget, at det burde være muligt at måle brystvolumen med firkantsignaler. De harmoniske overtoner kunne muligvis dæmpes ved hjælp af resonatoren da denne har funktion som et lavpasfilter, og dette skulle hermed testes som en løsning til denne problemstilling. Således blev det besluttet at arbejde videre med Arduino'en da de økonomiske fordele stadig talte for. Der opstod endvidere en udfordring forårsaget af Arduino'ens begrænsede ydeevne. Arduino´ens højeste Loop Rate ligger på omkring 122Hz. I og med at den valgte højtaler ABS-224-RC (H1) er egnet til et frekvensområde fra 100 Hz op til 2 kHz vil der ikke kunne genereres et frekvenssignal, som er muligt at opfange. For at få en korrekt digital repræsentation af det analoge signal, skal der minimum samples med det dobblete af indgangssignalet. Således vil det indsendte signal være begrænset til maksimalt 50 Hz, for at undgå aliasering jv. Nyquists samplingsteori. Til sidst blev det konkluderet, at udfordringerne ikke blev opvejet af de økonomiske fordele, og det blev derfor besluttet at udskifte Arduino'en til en DAQ da der kan samples med en højere frekvens, og samtidig anvendes sinussignal for at undgå udfordringer med harmoniske overtoner.      

\subsubsection{DAQ}
Udviklingen af et VI til at generere en lyd igennem DAQ´en til højtaleren H3 var mere udfordrende en først antaget. Der blev fundet flere guides på \texttt{www.NI.com} til at løse problemstillingen, og koden dertil fandtes meget simpel. Disse guides blev brugt til at bygge VI'et \texttt{generefrekvenssignal04.vi}, men der opstod fejl i forbindelse med opsætning at DAQ Assistant-modulet. 

\begin{figure}[htb]
			\centering
				\includegraphics[width=4in]{FejlDAQAssistant}
				\caption{Figuren viser fejlmeddelelsen i forbindelse med opsætningen af DAQ Assistant-modulet}	
				\label{fig:FejlDAQAssistant}
			\end{figure}
			
			
Dette blev løst ved at vælge \textit{Generation mode} til \textit{1 sample(on Demand)} og \textit{Signal output range min} til 0. Løsningen blev fundet ved brug af \textit{trail and error} metoden sammen med vejleder. Der opstod herefter en ny fejl med kørslen af VI´et. Under fejlsøgning af denne problemstilling blev det opdaget at DAQ´en har en maksimal samplingsrate på 150 Hz. Fejlsøgning blev afbrudt da denne nye viden satte udviklingen af VI´et i et nyt perspektiv. Med brug af DAQ´en vil der kunne generes et maksimalt signal på 75Hz, når Nyquists samplingsteori opfyldes. I udviklingen af prototypen ønskes det, at kunne genere et bredt frekvensbånd fra 100 Hz op til 1000 Hz. Højtalerens begrænsede frekvensspektre fra 100Hz til 2kHz  gør det ikke muligt at anvende DAQ´en sammen med H3. 
På denne begrund blev det besluttet ikke at anvende DAQ´en til lydgenerering gennem H3 i det videre projektforløb. 	

\subsection{Det videre testforløb}
Det videre testforløb er, efter erfaringer og refleksioner over resonatorens opførelse, skitseret i følgende tabel. Ud fra disse specificerede undersøgelser, testes der mod at nå det konceptuelle produkt.  

\begin{tabularx}{1.1\textwidth}{|l|l|l|X|}
\hline
\textbf{\textbf{\begin{tabular}[c]{@{}l@{}}Videre\\test nr.\end{tabular}}} & \textbf{Undersøgelse} & \textbf{Testmetode} & \textbf{Materialer} \\ \hline
VT1 & \begin{tabular}[c]{@{}l@{}}Opførelse af $f_{b}$ på\\ kropslignende materiale\end{tabular} & \begin{tabular}[c]{@{}l@{}}Teste på forskellige\\ typer brystfantomer \end{tabular} & \begin{tabular}[c]{@{}l@{}} Gelatine, kyllingebryster,\\svinekød og -hud\end{tabular}\\ \hline

VT2 & 
\begin{tabular}[c]{@{}l@{}}Linearitet mellem\\ bryststørrelser og\\ volumenbestemmelser på\\ kropslignende materiale\end{tabular} & 
\begin{tabular}[c]{@{}l@{}}Teste på forskellige\\ typer brystfantomer \end{tabular} & 
\begin{tabular}[c]{@{}l@{}} Gelatine, kyllingebryster,\\svinekød og -hud\end{tabular}\\ \hline
VT3 & 
\begin{tabular}[c]{@{}l@{}}Betydning af resonators\\ kantafgrænsning\end{tabular} & 
\begin{tabular}[c]{@{}l@{}}Teste ud fra et komplet\\ lukket system samt\\ et system med kendte\\ åbninger\end{tabular} & \begin{tabular}[c]{@{}l@{}} Resonator, hvor bund\\ kan skrues fast og\\ forsegles\end{tabular}\\ \hline
VT4 &
\begin{tabular}[c]{@{}l@{}}Betydning af resonators\\ udformning og\\ størrelse\end{tabular} & 
\begin{tabular}[c]{@{}l@{}}Teste med runde og\\ 
firkantede resonatorer\\ i forskellige størrelser\end{tabular} &
\begin{tabular}[c]{@{}l@{}}Firkantede og runde\\ resonatorer bygget \\af træ, stål eller 3D-print\end{tabular}\\ \hline
VT5 &
\begin{tabular}[c]{@{}l@{}}Betydning af placering\\ for hhv.  lydkilde og\\ lydopfanger \end{tabular} & 
\begin{tabular}[c]{@{}l@{}}Teste med forskellige\\ placeringer af lydgiver\\ og lydopfanger\end{tabular} &
        - \\ \hline
VT6 &
\begin{tabular}[c]{@{}l@{}}Betydning af luft-\\temperatur samt \\ luftfugtighed\end{tabular} & 
\begin{tabular}[c]{@{}l@{}}Teste med forskellige\\ temperaturer og \\ luftfugtigheder\end{tabular} &
\begin{tabular}[c]{@{}l@{}}Varmekilde og vand\end{tabular} \\ \hline
\end{tabularx}
	




